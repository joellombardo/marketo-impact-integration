jQuery(document).ready((function(e){const o=mii_ajax_object.plugin_version||"unknown";mii_ajax_object.debug_mode?console.log(`Marketo Impact Integration version ${o}. Verbose logging is enabled.`):console.log(`Marketo Impact Integration version ${o}`),MktoForms2.whenReady((function(o){o.onSuccess((function(t,a){const n={};return mii_ajax_object.fields_to_target.forEach((function(e){n[e]=o.vals()[e]||""})),mii_ajax_object.debug_mode&&console.log("Field values collected:",n),e.ajax({url:mii_ajax_object.ajax_url,method:"POST",data:{action:"mii_send_data",fieldValues:n},success:function(e){const o=e.data.jwt;mii_ajax_object.debug_mode&&console.log("JWT received:",o);const t=o.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=JSON.parse(atob(t));mii_ajax_object.debug_mode&&console.log("Decoded JWT payload:",a);const n={user:a.user,jwt:o};mii_ajax_object.debug_mode&&console.log("Payload to upsertUser:",n),impact.api().upsertUser(n).then((function(e){console.log("User successfully upserted with Impact API")})).catch((function(e){console.error("Error upserting user with Impact API:",e)}))},error:function(e){console.error("Error sending data to generate JWT:",e)}}),!0}))}))}));