jQuery(document).ready((function(e){const o=mii_ajax_object.plugin_version||"unknown",n=!0===mii_ajax_object.debug_mode||"1"===mii_ajax_object.debug_mode||1===mii_ajax_object.debug_mode;if(n?console.log(`Marketo Impact Integration version ${o}. Verbose logging is enabled.`):console.log(`Marketo Impact Integration version ${o}`),void 0===window.MktoForms2)return void console.warn("Marketo is not loaded on this site. Skipping integration.");const a=new Set;!function(e){const o=setInterval((()=>{"undefined"!=typeof impact&&"function"==typeof impact.api&&(clearInterval(o),n&&console.log("Impact library loaded. Proceeding with integration."),e())}),100)}((function(){MktoForms2.whenReady((function(e){const o=e.getId();a.has(o)?n&&console.log(`Form ${o} has already been processed. Skipping.`):(a.add(o),n&&console.log(`Processing Marketo form with ID ${o}.`),impact.api().referralCookie().then((o=>{n&&console.log("Impact API referralCookie response:",o);const a=o.codes?Object.values(o.codes)[0]:null;if(a)if(n&&console.log("Referral code found:",a),mii_ajax_object.advocate_referral_id){const o=e.getFormElem().find(`[name="${mii_ajax_object.advocate_referral_id}"]`);o.length>0?(o.val(a),n&&console.log(`Injected referral code "${a}" into field "${mii_ajax_object.advocate_referral_id}".`)):n&&console.warn(`Advocate referral field "${mii_ajax_object.advocate_referral_id}" not found on the form.`)}else n&&console.log("No advocate_referral_id specified; skipping injection.");else n&&console.warn("No valid referral code found in Impact API response.")})).catch((e=>{n&&console.error("Error fetching referral code from Impact API:",e)})))}))}))}));